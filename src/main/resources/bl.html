<!DOCTYPE html>
<html>
  <head>
    <title>Bluetooth pairing</title>
<!-- Origin Trial Token, feature = Web Bluetooth, origin = https://pi.pe, expires = 2017-01-24 -->
<meta http-equiv="origin-trial" data-feature="Web Bluetooth" data-expires="2017-01-24" content="At+eFpPi6OI0oH0ycsTr4pwz9b/h0mMjhKIYL6MZtGuItXzc2cQq68CR9FEdAzwyetL+RHXiNuLdSgLcsW4hIA8AAABQeyJvcmlnaW4iOiAiaHR0cHM6Ly9waS5wZTo0NDMiLCAiZmVhdHVyZSI6ICJXZWJCbHVldG9vdGgiLCAiZXhwaXJ5IjogMTQ4NTMyMDM5OX0="/>
      <script src="js/require.js"></script>
      <script src="js/phono.sdp.js"></script>
      <script src="js/blepair.js"></script>
      <script src="js/pipeDb.js"></script>
      <script src="js/pipeDuct.js"></script>
      <script src="js/claim.js"></script>

  </head>


 <body>

 Bluetooth Pairing
 <button onclick="onConnectBtnClick()">Claim</button>
 <div id="values"></div>
 <div id="result"></div>
 <script>
     var pipeBLE;
     function onConnectBtnClick() {
        pipeBLE.connect().then(values => {
         var val = document.getElementById("values");
         var html = "";
         var vh = [];
         values.forEach(value => {html += value.name + ":" + value.hex + "<br/>"; vh[value.name]=value.hex;});
         val.innerHTML = html;
         var id = vh["fpa"]+vh["fpb"];
         var nonce = vh["nonce"];
         makedc(id,nonce);
        });
     };
     window.onload = function () {
         pipeBLE = PipeBLE;
         PipeDb.whoAmI(gotId, function(err) {
             console.log("could not create identity " + err);
         });
     };

 </script>
 </body>


</html>
